<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Long Running Task - System Blueprint</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@300;400;500;600&family=Syne:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <style>
        :root {
            --bg-deep: #0a0e14;
            --bg-surface: #0d1117;
            --grid-line: rgba(0, 255, 170, 0.04);
            --grid-accent: rgba(0, 255, 170, 0.08);
            --cyan: #00ffaa;
            --cyan-dim: #00cc88;
            --cyan-glow: rgba(0, 255, 170, 0.5);
            --magenta: #ff006e;
            --magenta-glow: rgba(255, 0, 110, 0.5);
            --amber: #ffbe0b;
            --amber-glow: rgba(255, 190, 11, 0.5);
            --text-primary: #e6edf3;
            --text-secondary: #7d8590;
            --text-dim: #484f58;
            --border: rgba(0, 255, 170, 0.15);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Fira Code', monospace;
            background: var(--bg-deep);
            min-height: 100vh;
            color: var(--text-primary);
            overflow-x: hidden;
            position: relative;
        }

        /* Blueprint grid background */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image:
                linear-gradient(var(--grid-line) 1px, transparent 1px),
                linear-gradient(90deg, var(--grid-line) 1px, transparent 1px),
                linear-gradient(var(--grid-accent) 1px, transparent 1px),
                linear-gradient(90deg, var(--grid-accent) 1px, transparent 1px);
            background-size: 20px 20px, 20px 20px, 100px 100px, 100px 100px;
            pointer-events: none;
            z-index: 0;
        }

        /* Noise texture overlay */
        body::after {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");
            opacity: 0.03;
            pointer-events: none;
            z-index: 1;
        }

        /* Scanline effect */
        .scanlines {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: repeating-linear-gradient(
                0deg,
                transparent,
                transparent 2px,
                rgba(0, 0, 0, 0.1) 2px,
                rgba(0, 0, 0, 0.1) 4px
            );
            pointer-events: none;
            z-index: 2;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 60px 40px;
            position: relative;
            z-index: 10;
        }

        /* Header */
        .header {
            text-align: center;
            margin-bottom: 80px;
            position: relative;
        }

        .header::before {
            content: 'SYSTEM://BLUEPRINT';
            position: absolute;
            top: -30px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 0.65rem;
            letter-spacing: 4px;
            color: var(--cyan-dim);
            opacity: 0.6;
        }

        .title {
            font-family: 'Syne', sans-serif;
            font-size: clamp(2.5rem, 6vw, 4.5rem);
            font-weight: 800;
            letter-spacing: -2px;
            line-height: 1;
            margin-bottom: 20px;
            position: relative;
            display: inline-block;
        }

        .title-main {
            color: var(--text-primary);
            display: block;
        }

        .title-accent {
            color: var(--cyan);
            text-shadow: 0 0 30px var(--cyan-glow), 0 0 60px var(--cyan-glow);
            display: block;
            animation: glow-pulse 3s ease-in-out infinite;
        }

        @keyframes glow-pulse {
            0%, 100% { opacity: 1; text-shadow: 0 0 30px var(--cyan-glow), 0 0 60px var(--cyan-glow); }
            50% { opacity: 0.8; text-shadow: 0 0 20px var(--cyan-glow), 0 0 40px var(--cyan-glow); }
        }

        .subtitle {
            font-size: 0.9rem;
            color: var(--text-secondary);
            letter-spacing: 2px;
            text-transform: uppercase;
            margin-top: 24px;
        }

        .subtitle span {
            color: var(--cyan);
        }

        /* Status bar */
        .status-bar {
            display: flex;
            justify-content: center;
            gap: 40px;
            margin-top: 40px;
            padding: 16px 0;
            border-top: 1px dashed var(--border);
            border-bottom: 1px dashed var(--border);
        }

        .status-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.75rem;
            color: var(--text-dim);
        }

        .status-dot {
            width: 6px;
            height: 6px;
            border-radius: 50%;
            animation: blink 2s infinite;
        }

        .status-dot.active { background: var(--cyan); box-shadow: 0 0 10px var(--cyan-glow); }
        .status-dot.warning { background: var(--amber); box-shadow: 0 0 10px var(--amber-glow); animation-delay: 0.5s; }
        .status-dot.secure { background: var(--magenta); box-shadow: 0 0 10px var(--magenta-glow); animation-delay: 1s; }

        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.4; }
        }

        /* Section */
        .section {
            margin-bottom: 100px;
            position: relative;
        }

        .section-header {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 40px;
        }

        .section-number {
            font-family: 'Syne', sans-serif;
            font-size: 0.7rem;
            font-weight: 600;
            color: var(--bg-deep);
            background: var(--cyan);
            padding: 6px 12px;
            letter-spacing: 2px;
        }

        .section-title {
            font-family: 'Syne', sans-serif;
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--text-primary);
            letter-spacing: -0.5px;
        }

        .section-line {
            flex: 1;
            height: 1px;
            background: linear-gradient(90deg, var(--border), transparent);
        }

        /* Architecture grid */
        .arch-grid {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: 2px;
            background: var(--border);
            padding: 2px;
            position: relative;
        }

        .arch-grid::before {
            content: '';
            position: absolute;
            top: -20px;
            left: 0;
            width: 100%;
            height: 20px;
            background: repeating-linear-gradient(
                90deg,
                var(--cyan) 0px,
                var(--cyan) 4px,
                transparent 4px,
                transparent 8px
            );
            opacity: 0.3;
        }

        .arch-node {
            background: var(--bg-surface);
            padding: 28px 20px;
            text-align: center;
            position: relative;
            overflow: hidden;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: crosshair;
        }

        .arch-node::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: var(--cyan);
            transform: scaleX(0);
            transform-origin: left;
            transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .arch-node:hover::before {
            transform: scaleX(1);
        }

        .arch-node:hover {
            background: rgba(0, 255, 170, 0.05);
        }

        .arch-node:hover .node-icon {
            transform: scale(1.1);
            color: var(--cyan);
            text-shadow: 0 0 20px var(--cyan-glow);
        }

        .node-icon {
            font-size: 1.8rem;
            margin-bottom: 16px;
            display: block;
            transition: all 0.3s ease;
            color: var(--text-secondary);
        }

        .node-title {
            font-family: 'Syne', sans-serif;
            font-size: 0.85rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 8px;
            letter-spacing: 0.5px;
        }

        .node-file {
            font-size: 0.7rem;
            color: var(--cyan);
            margin-bottom: 10px;
            padding: 4px 8px;
            background: rgba(0, 255, 170, 0.08);
            display: inline-block;
        }

        .node-desc {
            font-size: 0.7rem;
            color: var(--text-dim);
            line-height: 1.6;
        }

        /* Two Agent Pattern */
        .agent-comparison {
            display: grid;
            grid-template-columns: 1fr auto 1fr;
            gap: 0;
            align-items: stretch;
        }

        .agent-panel {
            background: var(--bg-surface);
            border: 1px solid var(--border);
            padding: 40px;
            position: relative;
            overflow: hidden;
        }

        .agent-panel::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
        }

        .agent-panel.init::before { background: var(--magenta); }
        .agent-panel.code::before { background: var(--cyan); }

        .agent-panel.init .agent-badge {
            background: var(--magenta);
            box-shadow: 0 0 20px var(--magenta-glow);
        }
        .agent-panel.code .agent-badge {
            background: var(--cyan);
            box-shadow: 0 0 20px var(--cyan-glow);
        }

        .agent-badge {
            font-family: 'Syne', sans-serif;
            font-size: 0.6rem;
            font-weight: 700;
            color: var(--bg-deep);
            padding: 6px 14px;
            letter-spacing: 3px;
            display: inline-block;
            margin-bottom: 20px;
        }

        .agent-name {
            font-family: 'Syne', sans-serif;
            font-size: 1.4rem;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 8px;
        }

        .agent-session {
            font-size: 0.75rem;
            color: var(--text-dim);
            margin-bottom: 30px;
        }

        .agent-tasks {
            list-style: none;
        }

        .agent-tasks li {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            padding: 12px 0;
            border-bottom: 1px dashed rgba(255, 255, 255, 0.05);
            font-size: 0.8rem;
            color: var(--text-secondary);
            transition: all 0.2s ease;
        }

        .agent-tasks li:hover {
            color: var(--text-primary);
            padding-left: 8px;
        }

        .agent-tasks li:last-child {
            border-bottom: none;
        }

        .task-marker {
            width: 16px;
            height: 16px;
            border: 1px solid var(--text-dim);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.6rem;
            flex-shrink: 0;
            margin-top: 2px;
        }

        .agent-panel.init .task-marker { border-color: var(--magenta); color: var(--magenta); }
        .agent-panel.code .task-marker { border-color: var(--cyan); color: var(--cyan); }

        .agent-divider {
            width: 80px;
            background: var(--bg-surface);
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            border-top: 1px solid var(--border);
            border-bottom: 1px solid var(--border);
        }

        .agent-divider::before {
            content: '';
            position: absolute;
            top: 0;
            bottom: 0;
            left: 50%;
            width: 1px;
            background: repeating-linear-gradient(
                180deg,
                var(--cyan) 0px,
                var(--cyan) 4px,
                transparent 4px,
                transparent 12px
            );
        }

        .divider-label {
            background: var(--bg-surface);
            padding: 16px 8px;
            font-size: 0.6rem;
            color: var(--text-dim);
            letter-spacing: 2px;
            writing-mode: vertical-rl;
            text-orientation: mixed;
            z-index: 1;
        }

        /* Flowchart section */
        .flow-container {
            background: var(--bg-surface);
            border: 1px solid var(--border);
            padding: 50px;
            position: relative;
        }

        .flow-container::before {
            content: 'EXECUTION_FLOW.diagram';
            position: absolute;
            top: 20px;
            left: 20px;
            font-size: 0.65rem;
            color: var(--text-dim);
            letter-spacing: 1px;
        }

        .flow-container::after {
            content: 'v1.0.0';
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 0.65rem;
            color: var(--cyan);
        }

        .mermaid {
            display: flex;
            justify-content: center;
            padding: 20px;
        }

        .flow-legend {
            display: flex;
            justify-content: center;
            gap: 32px;
            margin-top: 30px;
            padding-top: 30px;
            border-top: 1px dashed var(--border);
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 0.7rem;
            color: var(--text-secondary);
        }

        .legend-marker {
            width: 20px;
            height: 3px;
        }

        .legend-marker.init { background: var(--magenta); box-shadow: 0 0 8px var(--magenta-glow); }
        .legend-marker.code { background: var(--cyan); box-shadow: 0 0 8px var(--cyan-glow); }
        .legend-marker.client { background: var(--amber); box-shadow: 0 0 8px var(--amber-glow); }

        /* Security section */
        .security-flow {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 2px;
            background: var(--border);
        }

        .security-node {
            background: var(--bg-surface);
            padding: 32px 24px;
            text-align: center;
            position: relative;
        }

        .security-node::after {
            content: '';
            position: absolute;
            top: 50%;
            right: -12px;
            width: 22px;
            height: 2px;
            background: var(--cyan);
            z-index: 1;
        }

        .security-node:last-child::after {
            display: none;
        }

        .security-icon {
            font-size: 2rem;
            margin-bottom: 16px;
            display: block;
        }

        .security-label {
            font-size: 0.75rem;
            color: var(--text-primary);
            margin-bottom: 8px;
            font-weight: 500;
        }

        .security-detail {
            font-size: 0.65rem;
            color: var(--text-dim);
            line-height: 1.5;
        }

        .security-branches {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 2px;
            background: var(--border);
            margin-top: 2px;
        }

        .branch-node {
            background: var(--bg-surface);
            padding: 24px;
            text-align: center;
            position: relative;
        }

        .branch-node::before {
            content: '';
            position: absolute;
            top: -12px;
            left: 50%;
            width: 2px;
            height: 12px;
        }

        .branch-node:nth-child(1)::before { background: var(--cyan); }
        .branch-node:nth-child(2)::before { background: var(--amber); }
        .branch-node:nth-child(3)::before { background: var(--magenta); }

        .branch-status {
            font-size: 0.65rem;
            padding: 4px 12px;
            margin-bottom: 12px;
            display: inline-block;
        }

        .branch-status.allow { background: rgba(0, 255, 170, 0.15); color: var(--cyan); }
        .branch-status.warn { background: rgba(255, 190, 11, 0.15); color: var(--amber); }
        .branch-status.block { background: rgba(255, 0, 110, 0.15); color: var(--magenta); }

        .branch-title {
            font-size: 0.8rem;
            color: var(--text-primary);
            margin-bottom: 8px;
        }

        .branch-examples {
            font-size: 0.65rem;
            color: var(--text-dim);
        }

        /* Sequence diagram */
        .sequence-container {
            background: var(--bg-surface);
            border: 1px solid var(--border);
            padding: 50px;
            position: relative;
            overflow-x: auto;
        }

        .sequence-container::before {
            content: 'SEQUENCE.timeline';
            position: absolute;
            top: 20px;
            left: 20px;
            font-size: 0.65rem;
            color: var(--text-dim);
            letter-spacing: 1px;
        }

        /* Footer */
        .footer {
            text-align: center;
            padding: 60px 0 40px;
            border-top: 1px dashed var(--border);
            margin-top: 60px;
        }

        .footer-logo {
            font-family: 'Syne', sans-serif;
            font-size: 0.8rem;
            font-weight: 700;
            color: var(--cyan);
            letter-spacing: 4px;
            margin-bottom: 12px;
        }

        .footer-text {
            font-size: 0.7rem;
            color: var(--text-dim);
        }

        /* Responsive */
        @media (max-width: 1200px) {
            .arch-grid {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        @media (max-width: 900px) {
            .agent-comparison {
                grid-template-columns: 1fr;
            }
            .agent-divider {
                width: 100%;
                height: 60px;
                writing-mode: horizontal-tb;
            }
            .agent-divider::before {
                top: 50%;
                left: 0;
                right: 0;
                bottom: auto;
                width: 100%;
                height: 1px;
                background: repeating-linear-gradient(
                    90deg,
                    var(--cyan) 0px,
                    var(--cyan) 4px,
                    transparent 4px,
                    transparent 12px
                );
            }
            .divider-label {
                writing-mode: horizontal-tb;
                padding: 8px 16px;
            }
            .arch-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            .security-flow {
                grid-template-columns: repeat(2, 1fr);
            }
            .security-node:nth-child(2)::after {
                display: none;
            }
        }

        @media (max-width: 600px) {
            .container {
                padding: 40px 20px;
            }
            .arch-grid, .security-flow, .security-branches {
                grid-template-columns: 1fr;
            }
            .security-node::after {
                display: none;
            }
            .status-bar {
                flex-direction: column;
                gap: 12px;
            }
        }

        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        ::-webkit-scrollbar-track {
            background: var(--bg-deep);
        }
        ::-webkit-scrollbar-thumb {
            background: var(--border);
        }
        ::-webkit-scrollbar-thumb:hover {
            background: var(--cyan);
        }
    </style>
</head>
<body>
    <div class="scanlines"></div>

    <div class="container">
        <!-- Header -->
        <header class="header">
            <h1 class="title">
                <span class="title-main">LONG RUNNING</span>
                <span class="title-accent">TASK FLOW</span>
            </h1>
            <p class="subtitle">Claude Agent SDK <span>//</span> Autonomous Coding Architecture</p>

            <div class="status-bar">
                <div class="status-item">
                    <span class="status-dot active"></span>
                    SYSTEM ACTIVE
                </div>
                <div class="status-item">
                    <span class="status-dot warning"></span>
                    LOOP RUNNING
                </div>
                <div class="status-item">
                    <span class="status-dot secure"></span>
                    SECURITY ENABLED
                </div>
            </div>
        </header>

        <!-- Architecture Overview -->
        <section class="section">
            <div class="section-header">
                <span class="section-number">01</span>
                <h2 class="section-title">Architecture Overview</h2>
                <div class="section-line"></div>
            </div>

            <div class="arch-grid">
                <div class="arch-node">
                    <span class="node-icon">&#9655;</span>
                    <div class="node-title">Entry Point</div>
                    <code class="node-file">autonomous_agent_demo.py</code>
                    <p class="node-desc">CLI argument parsing & main execution trigger</p>
                </div>
                <div class="arch-node">
                    <span class="node-icon">&#8635;</span>
                    <div class="node-title">Agent Logic</div>
                    <code class="node-file">agent.py</code>
                    <p class="node-desc">Main loop control & session orchestration</p>
                </div>
                <div class="arch-node">
                    <span class="node-icon">&#9881;</span>
                    <div class="node-title">Client Config</div>
                    <code class="node-file">client.py</code>
                    <p class="node-desc">SDK client factory & security configuration</p>
                </div>
                <div class="arch-node">
                    <span class="node-icon">&#9888;</span>
                    <div class="node-title">Security Hook</div>
                    <code class="node-file">security.py</code>
                    <p class="node-desc">Bash command whitelist validation</p>
                </div>
                <div class="arch-node">
                    <span class="node-icon">&#9998;</span>
                    <div class="node-title">Prompt Loader</div>
                    <code class="node-file">prompts.py</code>
                    <p class="node-desc">Initializer / Coding prompt management</p>
                </div>
                <div class="arch-node">
                    <span class="node-icon">&#9632;</span>
                    <div class="node-title">Progress Track</div>
                    <code class="node-file">progress.py</code>
                    <p class="node-desc">Test pass rate calculation & display</p>
                </div>
            </div>
        </section>

        <!-- Two Agent Pattern -->
        <section class="section">
            <div class="section-header">
                <span class="section-number">02</span>
                <h2 class="section-title">Two-Agent Pattern</h2>
                <div class="section-line"></div>
            </div>

            <div class="agent-comparison">
                <div class="agent-panel init">
                    <span class="agent-badge">PHASE 1</span>
                    <h3 class="agent-name">Initializer Agent</h3>
                    <p class="agent-session">First Session Only</p>
                    <ul class="agent-tasks">
                        <li>
                            <span class="task-marker">01</span>
                            <span>Read app_spec.txt specification</span>
                        </li>
                        <li>
                            <span class="task-marker">02</span>
                            <span>Generate feature_list.json with 200 test cases</span>
                        </li>
                        <li>
                            <span class="task-marker">03</span>
                            <span>Create init.sh bootstrap script</span>
                        </li>
                        <li>
                            <span class="task-marker">04</span>
                            <span>Initialize project directory structure</span>
                        </li>
                        <li>
                            <span class="task-marker">05</span>
                            <span>Setup Git repository with initial commit</span>
                        </li>
                    </ul>
                </div>

                <div class="agent-divider">
                    <span class="divider-label">HANDOFF</span>
                </div>

                <div class="agent-panel code">
                    <span class="agent-badge">PHASE 2+</span>
                    <h3 class="agent-name">Coding Agent</h3>
                    <p class="agent-session">All Subsequent Sessions</p>
                    <ul class="agent-tasks">
                        <li>
                            <span class="task-marker">01</span>
                            <span>Orient: Read progress & feature status</span>
                        </li>
                        <li>
                            <span class="task-marker">02</span>
                            <span>Verify: Run regression tests on passing features</span>
                        </li>
                        <li>
                            <span class="task-marker">03</span>
                            <span>Implement: Build next priority feature</span>
                        </li>
                        <li>
                            <span class="task-marker">04</span>
                            <span>Test: Puppeteer browser automation verification</span>
                        </li>
                        <li>
                            <span class="task-marker">05</span>
                            <span>Update: Mark feature_list.json passes: true</span>
                        </li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- Main Execution Flow -->
        <section class="section">
            <div class="section-header">
                <span class="section-number">03</span>
                <h2 class="section-title">Main Execution Flow</h2>
                <div class="section-line"></div>
            </div>

            <div class="flow-container">
                <div class="mermaid">
flowchart TD
    A["시작"] --> B{"feature_list.json\n존재?"}

    B -->|"NO"| C["초기화 에이전트"]
    B -->|"YES"| D["코딩 에이전트"]

    C --> E["feature_list.json 생성\ninit.sh 생성\n프로젝트 구조 설정"]
    E --> F["세션 완료"]

    D --> G["파악 → 검증 → 구현\n→ 테스트 → 업데이트"]
    G --> F

    F --> H["3초 대기"]
    H --> I{"max_iterations\n도달?"}

    I -->|"YES"| J["종료"]
    I -->|"NO"| K["새 클라이언트 생성\n(Fresh Context)"]
    K --> D

    style A fill:#00ffaa,stroke:#00ffaa,color:#0a0e14
    style J fill:#00ffaa,stroke:#00ffaa,color:#0a0e14
    style C fill:#ff006e,stroke:#ff006e,color:#fff
    style D fill:#00ffaa,stroke:#00ffaa,color:#0a0e14
    style K fill:#ffbe0b,stroke:#ffbe0b,color:#0a0e14
    style B fill:#0d1117,stroke:#00ffaa,color:#e6edf3
    style I fill:#0d1117,stroke:#00ffaa,color:#e6edf3
                </div>

                <div class="flow-legend">
                    <div class="legend-item">
                        <span class="legend-marker init"></span>
                        초기화 에이전트
                    </div>
                    <div class="legend-item">
                        <span class="legend-marker code"></span>
                        코딩 에이전트
                    </div>
                    <div class="legend-item">
                        <span class="legend-marker client"></span>
                        클라이언트 생성
                    </div>
                </div>
            </div>
        </section>

        <!-- Security Hook Flow -->
        <section class="section">
            <div class="section-header">
                <span class="section-number">04</span>
                <h2 class="section-title">Security Hook Pipeline</h2>
                <div class="section-line"></div>
            </div>

            <div class="security-flow">
                <div class="security-node">
                    <span class="security-icon">&#128187;</span>
                    <div class="security-label">Claude Invokes Bash</div>
                    <p class="security-detail">Tool use request intercepted</p>
                </div>
                <div class="security-node">
                    <span class="security-icon">&#128274;</span>
                    <div class="security-label">bash_security_hook()</div>
                    <p class="security-detail">PreToolUse hook triggered</p>
                </div>
                <div class="security-node">
                    <span class="security-icon">&#128269;</span>
                    <div class="security-label">extract_commands()</div>
                    <p class="security-detail">Parse pipes, chains, subshells</p>
                </div>
                <div class="security-node">
                    <span class="security-icon">&#9745;</span>
                    <div class="security-label">ALLOWED_COMMANDS</div>
                    <p class="security-detail">Whitelist validation check</p>
                </div>
            </div>

            <div class="security-branches">
                <div class="branch-node">
                    <span class="branch-status allow">ALLOW</span>
                    <div class="branch-title">Safe Commands</div>
                    <p class="branch-examples">ls, npm, git, node, cat</p>
                </div>
                <div class="branch-node">
                    <span class="branch-status warn">VALIDATE</span>
                    <div class="branch-title">Sensitive Commands</div>
                    <p class="branch-examples">pkill, chmod, init.sh</p>
                </div>
                <div class="branch-node">
                    <span class="branch-status block">BLOCK</span>
                    <div class="branch-title">Forbidden Commands</div>
                    <p class="branch-examples">rm, curl, wget, sudo</p>
                </div>
            </div>
        </section>

        <!-- Sequence Diagram -->
        <section class="section">
            <div class="section-header">
                <span class="section-number">05</span>
                <h2 class="section-title">Detailed Sequence</h2>
                <div class="section-line"></div>
            </div>

            <div class="sequence-container">
                <div class="mermaid">
sequenceDiagram
    participant U as User
    participant D as Demo.py
    participant A as Agent.py
    participant C as Client.py
    participant S as Claude SDK
    participant F as FileSystem

    U->>D: python autonomous_agent_demo.py
    D->>A: run_autonomous_agent()

    A->>F: Check feature_list.json

    alt First Run
        F-->>A: Not Found
        A->>A: Select Initializer Prompt
    else Resume
        F-->>A: Exists
        A->>A: Select Coding Prompt
    end

    loop Infinite Loop
        A->>C: create_client()
        C-->>A: ClaudeSDKClient

        A->>S: query(prompt)

        loop Receive Response
            S-->>A: TextBlock / ToolUseBlock

            alt Bash Tool
                S->>C: bash_security_hook()
                C-->>S: Allow / Block
            end
        end

        A->>A: Sleep 3s
        A->>A: Next iteration
    end
                </div>
            </div>
        </section>

        <!-- Footer -->
        <footer class="footer">
            <div class="footer-logo">AUTONOMOUS CODING AGENT</div>
            <p class="footer-text">Claude Agent SDK // System Blueprint v1.0</p>
        </footer>
    </div>

    <script>
        mermaid.initialize({
            startOnLoad: true,
            theme: 'base',
            themeVariables: {
                primaryColor: '#0d1117',
                primaryTextColor: '#e6edf3',
                primaryBorderColor: '#00ffaa',
                lineColor: '#00ffaa',
                secondaryColor: '#0d1117',
                tertiaryColor: '#0d1117',
                background: '#0d1117',
                mainBkg: '#0d1117',
                nodeBorder: '#00ffaa',
                clusterBkg: 'rgba(0, 255, 170, 0.05)',
                titleColor: '#00ffaa',
                edgeLabelBackground: '#0d1117',
                actorBorder: '#00ffaa',
                actorBkg: '#0d1117',
                actorTextColor: '#e6edf3',
                actorLineColor: '#00ffaa',
                signalColor: '#00ffaa',
                signalTextColor: '#e6edf3',
                labelBoxBkgColor: '#0d1117',
                labelBoxBorderColor: '#00ffaa',
                labelTextColor: '#e6edf3',
                loopTextColor: '#00ffaa',
                noteBorderColor: '#00ffaa',
                noteBkgColor: 'rgba(0, 255, 170, 0.1)',
                noteTextColor: '#e6edf3',
                activationBorderColor: '#00ffaa',
                activationBkgColor: 'rgba(0, 255, 170, 0.1)',
                sequenceNumberColor: '#0a0e14'
            },
            flowchart: {
                curve: 'basis',
                padding: 24,
                nodeSpacing: 50,
                rankSpacing: 60,
                htmlLabels: true
            },
            sequence: {
                actorMargin: 80,
                boxMargin: 10,
                boxTextMargin: 8,
                noteMargin: 16,
                messageMargin: 40,
                mirrorActors: false,
                useMaxWidth: true
            }
        });
    </script>
</body>
</html>
