<project_specification>
  <project_name>2026 Global Marathon Finder</project_name>

  <overview>
    2026ë…„ ì „ì„¸ê³„ ë§ˆë¼í†¤ ëŒ€íšŒ ì •ë³´ë¥¼ ê²€ìƒ‰, ì¡°íšŒ, ê´€ë¦¬í•  ìˆ˜ ìˆëŠ” ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜.
    Claude Codeì˜ WebSearch ë„êµ¬ë¡œ ë§ˆë¼í†¤ ì •ë³´ë¥¼ ê²€ìƒ‰í•˜ê³ , REST APIë¥¼ í†µí•´ ì•±ì— ì €ì¥.
    ëŒ€ì‹œë³´ë“œ ìŠ¤íƒ€ì¼ì˜ UIë¡œ ë§ˆë¼í†¤ ì •ë³´ë¥¼ ì¹´ë“œ/í…Œì´ë¸”/ìº˜ë¦°ë” í˜•íƒœë¡œ í‘œì‹œ.
  </overview>

  <technology_stack>
    <frontend>
      <framework>React with Vite</framework>
      <styling>Tailwind CSS (via CDN)</styling>
      <state_management>React hooks and context</state_management>
      <routing>React Router for navigation</routing>
      <icons>Lucide React or Heroicons</icons>
      <port>Only launch on port {frontend_port}</port>
    </frontend>
    <backend>
      <runtime>Node.js with Express</runtime>
      <database>SQLite with better-sqlite3</database>
      <note>API_KEY is NOT required - Claude Code uses WebSearch tool directly</note>
    </backend>
  </technology_stack>

  <prerequisites>
    <environment_setup>
      - Frontend dependencies pre-installed via pnpm
      - Backend code goes in /server directory
      - Install backend dependencies as needed
    </environment_setup>
  </prerequisites>

  <workflow>
    <description>
      Claude Codeê°€ WebSearch ë„êµ¬ë¡œ ë§ˆë¼í†¤ ì •ë³´ë¥¼ ê²€ìƒ‰í•˜ê³  ì•±ì— ì €ì¥í•˜ëŠ” ë°©ì‹
    </description>
    <steps>
      <step>1. ì‚¬ìš©ìê°€ Claude Codeì— ë§ˆë¼í†¤ ê²€ìƒ‰ ìš”ì²­ (ì˜ˆ: "2026ë…„ 4ì›” ìœ ëŸ½ ë§ˆë¼í†¤ ê²€ìƒ‰í•´ì¤˜")</step>
      <step>2. Claude Codeê°€ WebSearch ë„êµ¬ë¡œ ë§ˆë¼í†¤ ì •ë³´ ê²€ìƒ‰</step>
      <step>3. Claude Codeê°€ ê²€ìƒ‰ ê²°ê³¼ë¥¼ íŒŒì‹±í•˜ì—¬ POST /api/marathons/bulk API í˜¸ì¶œ</step>
      <step>4. ì‚¬ìš©ìê°€ ì•±ì—ì„œ ì €ì¥ëœ ë§ˆë¼í†¤ ì •ë³´ ì¡°íšŒ/ê´€ë¦¬</step>
    </steps>
  </workflow>

  <core_features>
    <marathon_management>
      - ë§ˆë¼í†¤ ëª©ë¡ ì¡°íšŒ (ë‹¤ì–‘í•œ í•„í„°ë§ ì˜µì…˜)
      - ë§ˆë¼í†¤ ìƒì„¸ ì •ë³´ ë³´ê¸°
      - ë§ˆë¼í†¤ ìˆ˜ë™ ì¶”ê°€/í¸ì§‘/ì‚­ì œ
      - ì¦ê²¨ì°¾ê¸° ê¸°ëŠ¥
      - ì‚¬ìš©ì ë©”ëª¨ ì¶”ê°€
    </marathon_management>

    <views>
      - Cards ë·°: ì¹´ë“œ í˜•íƒœë¡œ ë§ˆë¼í†¤ í‘œì‹œ
      - Table ë·°: í…Œì´ë¸” í˜•íƒœë¡œ ë§ˆë¼í†¤ í‘œì‹œ
      - Calendar ë·°: ìº˜ë¦°ë”ì— ë§ˆë¼í†¤ ì¼ì • í‘œì‹œ
    </views>

    <filtering>
      - ëŒ€ë¥™ë³„ í•„í„° (Asia, Europe, Americas, Africa, Oceania)
      - ê±°ë¦¬ë³„ í•„í„° (Full, Half, 10K, 5K, Ultra)
      - ë‚ ì§œ ë²”ìœ„ í•„í„°
      - ê³µì¸ ì½”ìŠ¤ ì—¬ë¶€ í•„í„°
      - í…ìŠ¤íŠ¸ ê²€ìƒ‰ (ì´ë¦„, ë„ì‹œ)
    </filtering>

    <export>
      - CSV ë‚´ë³´ë‚´ê¸°
      - iCal ìº˜ë¦°ë” ë‚´ë³´ë‚´ê¸°
    </export>

    <theme>
      - Light/Dark mode toggle
      - System preference detection
    </theme>
  </core_features>

  <database_schema>
    <tables>
      <marathons>
        - id TEXT PRIMARY KEY
        - name TEXT NOT NULL
        - date TEXT NOT NULL (YYYY-MM-DD)
        - end_date TEXT
        - country TEXT NOT NULL
        - city TEXT NOT NULL
        - continent TEXT (Asia, Europe, Americas, Africa, Oceania)
        - distance_types TEXT NOT NULL (JSON array: ["full", "half", "10k"])
        - registration_fee TEXT
        - registration_deadline TEXT (YYYY-MM-DD)
        - official_website TEXT
        - course_description TEXT
        - course_type TEXT (flat, hilly, mixed, trail)
        - elevation_gain INTEGER
        - eligibility TEXT
        - qualification_required INTEGER DEFAULT 0
        - certified INTEGER DEFAULT 1
        - certification_body TEXT (AIMS, IAAF, etc.)
        - world_major INTEGER DEFAULT 0
        - time_limit TEXT
        - is_favorite INTEGER DEFAULT 0
        - status TEXT DEFAULT 'upcoming'
        - source_url TEXT
        - created_at DATETIME DEFAULT CURRENT_TIMESTAMP
        - updated_at DATETIME DEFAULT CURRENT_TIMESTAMP
      </marathons>

      <user_notes>
        - id TEXT PRIMARY KEY
        - marathon_id TEXT NOT NULL (FK to marathons)
        - note TEXT NOT NULL
        - created_at DATETIME DEFAULT CURRENT_TIMESTAMP
      </user_notes>
    </tables>
  </database_schema>

  <api_endpoints>
    <marathons>
      - GET /api/marathons (list with filters and pagination)
        Query params: page, limit, continent, country, distance, dateFrom, dateTo, certified, favorite, search, sort, order
      - GET /api/marathons/:id (get marathon with notes)
      - POST /api/marathons (create new marathon)
      - POST /api/marathons/bulk (bulk create marathons - used by Claude Code)
      - PUT /api/marathons/:id (update marathon)
      - DELETE /api/marathons/:id (delete marathon)
      - PATCH /api/marathons/:id/favorite (toggle favorite)
    </marathons>

    <notes>
      - GET /api/marathons/:id/notes (get notes for marathon)
      - POST /api/marathons/:id/notes (add note)
      - DELETE /api/notes/:id (delete note)
    </notes>

    <stats>
      - GET /api/stats (dashboard statistics)
    </stats>

    <export>
      - GET /api/export/csv (export as CSV)
      - GET /api/export/ical (export as iCal)
    </export>
  </api_endpoints>

  <ui_layout>
    <main_layout>
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚  Header: Logo | Marathon Finder 2026 | [Theme Toggle]           â”‚
      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
      â”‚   Sidebar      â”‚              Main Content                      â”‚
      â”‚                â”‚                                                â”‚
      â”‚ Quick Filters  â”‚  [Cards] [Table] [Calendar] ë·° ì „í™˜            â”‚
      â”‚ - Continent    â”‚                                                â”‚
      â”‚ - Distance     â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
      â”‚ - Date Range   â”‚  â”‚ Marathon â”‚ â”‚ Marathon â”‚ â”‚ Marathon â”‚       â”‚
      â”‚ - Certified    â”‚  â”‚ Card     â”‚ â”‚ Card     â”‚ â”‚ Card     â”‚       â”‚
      â”‚                â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
      â”‚ Actions        â”‚                                                â”‚
      â”‚ [+ Add]        â”‚  Pagination: < 1 2 3 ... >                     â”‚
      â”‚ [Export]       â”‚                                                â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    </main_layout>

    <marathon_card>
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚ â­ [Favorite]              ğŸƒ Full/Half â”‚
      â”‚                                         â”‚
      â”‚ Tokyo Marathon 2026                     â”‚
      â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
      â”‚ ğŸ“… 2026-02-15                           â”‚
      â”‚ ğŸ“ Tokyo, Japan                         â”‚
      â”‚ ğŸ’° Â¥23,300                              â”‚
      â”‚ â° Registration: ~2025-08-31            â”‚
      â”‚ âœ… AIMS Certified                       â”‚
      â”‚                                         â”‚
      â”‚ [Details] [Website â†’]                   â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    </marathon_card>

    <marathon_detail_modal>
      - Basic Info: Date, Location, Distance types
      - Registration: Fee, Deadline, Status
      - Course: Type, Elevation, Description, Time limit
      - Eligibility: Requirements, Qualification, Certification
      - User notes section
      - Actions: Website link, Calendar add, Favorite toggle
    </marathon_detail_modal>
  </ui_layout>

  <design_system>
    <colors>
      Light Mode:
        - Background: #FFFFFF
        - Surface: #F8FAFC
        - Card: #FFFFFF
        - Text Primary: #1E293B
        - Text Secondary: #64748B
        - Border: #E2E8F0
        - Primary: #3B82F6 (Blue)
        - Success: #22C55E
        - Warning: #F59E0B
        - Accent: #8B5CF6 (Purple for favorites)

      Dark Mode:
        - Background: #0F172A
        - Surface: #1E293B
        - Card: #334155
        - Text Primary: #F1F5F9
        - Text Secondary: #94A3B8
        - Border: #475569
        - Primary: #60A5FA
    </colors>

    <typography>
      - System font: Inter, SF Pro, Roboto, system-ui
      - Headings: Semi-bold
      - Body: Regular
    </typography>

    <components>
      - Cards: Rounded corners, subtle shadow
      - Buttons: Rounded, clear hover states
      - Inputs: Clean borders, focus rings
      - Badges: Pill-shaped status indicators
      - Modals: Centered, backdrop blur
    </components>
  </design_system>

  <implementation_steps>
    <step number="1">
      <title>Backend Foundation</title>
      <tasks>
        - Initialize Express server
        - Set up SQLite database with schema
        - Create marathons CRUD endpoints
        - Add bulk import endpoint
      </tasks>
    </step>

    <step number="2">
      <title>Frontend Layout</title>
      <tasks>
        - Create Header + Sidebar + Content layout
        - Build filter components
        - Add view toggle (Cards/Table/Calendar)
        - Implement theme toggle
      </tasks>
    </step>

    <step number="3">
      <title>Marathon Components</title>
      <tasks>
        - Build MarathonCard component
        - Build MarathonTable component
        - Build MarathonCalendar component
        - Build MarathonDetail modal
        - Add pagination
      </tasks>
    </step>

    <step number="4">
      <title>Data Management</title>
      <tasks>
        - Add/Edit marathon form
        - Favorite toggle functionality
        - User notes feature
        - Delete confirmation
      </tasks>
    </step>

    <step number="5">
      <title>Statistics and Export</title>
      <tasks>
        - Dashboard statistics
        - CSV export
        - iCal export
      </tasks>
    </step>

    <step number="6">
      <title>Polish</title>
      <tasks>
        - Loading states and skeleton UI
        - Error handling and toast notifications
        - Responsive design
        - Performance optimization
      </tasks>
    </step>
  </implementation_steps>

  <success_criteria>
    - Marathons can be added via bulk API (Claude Code integration)
    - Marathons can be filtered by continent, distance, date, certification
    - Cards/Table/Calendar view switching works
    - Marathon detail modal shows all information
    - Favorites and notes functionality works
    - CSV/iCal export works
    - Light/Dark theme toggle works
    - Responsive design for mobile
  </success_criteria>

  <sample_data>
    <world_major_marathons_2026>
      - Tokyo Marathon: 2026-02-15, Tokyo, Japan
      - Boston Marathon: 2026-04-20, Boston, USA
      - London Marathon: 2026-04-26, London, UK
      - Berlin Marathon: 2026-09-27, Berlin, Germany
      - Chicago Marathon: 2026-10-11, Chicago, USA
      - NYC Marathon: 2026-11-01, New York, USA
    </world_major_marathons_2026>
  </sample_data>
</project_specification>
